{% extends "base.html" %}
{% block title %}User Profile{% endblock %}
{% block content %}

<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- 用户资料卡片 -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">User Profile</h3>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('user_profile') }}">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}">
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}">
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Address</label>
                            <input type="text" class="form-control" id="address" name="address" value="{{ user.address or '' }}">
                        </div>

                        <div class="mb-3">
                            <label for="gender" class="form-label">Gender</label>
                            <select class="form-select" id="gender" name="gender">
                                <option value="">Prefer not to say</option>
                                <option value="male" {% if user.gender == 'male' %}selected{% endif %}>Male</option>
                                <option value="female" {% if user.gender == 'female' %}selected{% endif %}>Female</option>
                                <option value="other" {% if user.gender == 'other' %}selected{% endif %}>Other</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="bio" class="form-label">About Me</label>
                            <textarea class="form-control" id="bio" name="bio" rows="3">{{ user.bio or '' }}</textarea>
                        </div>

                        <div class="text-end">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 修改密码卡片 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">Change Password</h3>
                </div>
                <div class="card-body">
                    <form id="passwordForm" onsubmit="changePassword(event)">
    <div class="mb-3">
        <label for="current_password" class="form-label">Current Password</label>
        <input type="password" class="form-control" id="current_password" name="current_password">
    </div>

    <div class="mb-3">
        <label for="new_password" class="form-label">New Password</label>
        <input type="password" class="form-control" id="new_password" name="new_password">
    </div>

    <div class="mb-3">
        <label for="confirm_password" class="form-label">Confirm New Password</label>
        <input type="password" class="form-control" id="confirm_password" name="confirm_password">
    </div>

    <div class="text-end">
        <button type="submit" class="btn btn-primary">Change Password</button>
    </div>
</form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}